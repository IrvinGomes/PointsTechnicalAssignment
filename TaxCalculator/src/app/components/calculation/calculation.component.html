<div class="calculationPage">

    <div class="form">
        <h2>Informations</h2>
        <section>
            <mat-checkbox [(ngModel)]="byYear">By Year</mat-checkbox>
        </section>
        <mat-form-field appearance="outline">
            <mat-label>Value</mat-label>
            <input matInput type="number" [(ngModel)]="value">
        </mat-form-field>
        <br>
        <mat-form-field appearance="outline" *ngIf="byYear">
            <mat-label>Year</mat-label>
            <input matInput type="number" min="1900" max="{{maxYear}}" [(ngModel)]="year">
        </mat-form-field>
        <br>
        <button mat-stroked-button (click)="calculate()">Calculate</button>
    </div>

    <div class="result" *ngIf="finished!=undefined">
        <h2>Tax Result</h2>

        <mat-spinner *ngIf="!finished"></mat-spinner>

        <div *ngIf="finished">
            <p><strong>Salary</strong>: {{value|currency}}</p>
            <br>
            <div *ngFor="let payment of payments">
                <p>Value under rate {{payment.rate}}%: {{payment.value | currency}}</p>
                <p>Will pay: {{payment.owed | currency}}</p>
                <br>
            </div>
            <br>
            <p><strong>Total owed: </strong>{{total|currency}}</p>
        </div>
    </div>

</div>